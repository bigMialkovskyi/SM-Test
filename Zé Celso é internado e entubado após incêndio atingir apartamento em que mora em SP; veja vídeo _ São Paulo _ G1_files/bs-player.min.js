(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},e.apply(this,arguments)}function t(e,t,a,r,s,o,i){try{var n=e[o](i),l=n.value}catch(e){return void a(e)}n.done?t(l):Promise.resolve(l).then(r,s)}function a(e){return function(){var a=this,r=arguments;return new Promise((function(s,o){var i=e.apply(a,r);function n(e){t(i,s,o,n,l,"next",e)}function l(e){t(i,s,o,n,l,"throw",e)}n(void 0)}))}}var r=["LoginScreen","VideoRecommendationPlugin","ChartbeatPlugin"],s=()=>{var e;return(null==globalThis||null==(e=globalThis.cdaaas)||null==(e=e.SETTINGS)?void 0:e.PLAYER)||{}},o=function(){var e=a((function*(e){var t={};return globalThis.getPlayerAssetsManager&&(yield globalThis.getPlayerAssetsManager(),t=e?yield globalThis.playerAssetsManager.getPluginsByProfile(e,!0):yield globalThis.playerAssetsManager.getPlugins(r,!0)),t}));return function(t){return e.apply(this,arguments)}}(),i=function(){var t=a((function*(t){var a,r,{videoID:i,assetsProfileId:n,autoPlay:l=!1,bsplayer:y={},customPlayerOptions:u={}}=void 0===t?{}:t,d=s().OPTIONS,c={};try{c=yield o(n)}catch(e){console.error("[bs-player::__GetBSPlayerConfigs] error on getPlugins")}var h={plugins:c,loginScreenOptions:{content:{description:"Faça seu login grátis e tenha acesso ilimitado às exclusividades "+((null==(a=window.cdaaas)||null==(a=a.SETTINGS)?void 0:a.SITE_NAME)||"")},tenantId:(null==(r=window.cdaaas)||null==(r=r.SETTINGS)?void 0:r.SITE_ID)||""}},g=(()=>{var e=s().ASYNC_OPTIONS,t={},a=!1;return e&&Object.keys(e).forEach((r=>{e[r]&&(t[r]=e[r],a=!0)})),a?t:null})();return g&&(y.asyncIsDone=!0),e({videosIDs:i,width:"100%",height:"100%",persistConfig:!1,autoPlay:l},d,u,h,{events:{onCanPlay:()=>{y.canPlayResolve()},onError:e=>{y.onErrorResolve(e),console.error(e)}}},g)}));return function(e){return t.apply(this,arguments)}}();class n extends HTMLElement{constructor(){super(),this.canPlay=new Promise((e=>{this.canPlayResolve=e})),this.onError=new Promise((e=>{this.onErrorResolve=e})),this.version="1.8.0"}connectedCallback(){this.isConnected&&this.parentElement&&(this.lazy&&"complete"!==document.readyState?this.setLazyAttach():this.__attachPlayerToContainer())}setLazyAttach(){window.addEventListener("load",this.onLoaded.bind(this))}onLoaded(){window.removeEventListener("load",this.onLoaded),this.__attachPlayerToContainer()}getOptionsByAttributes(){for(var{length:e}=this.attributes,t={},a="data-opt-",r=0;r<e;r++){var{name:s,value:o}=this.attributes[r];if(s.startsWith(a)){var i=s.split(a)[1].toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,((e,t)=>t.toUpperCase())),n=""===o||o;i&&(t[i]=n)}}return t}__attachPlayerToContainer(){var t=this;return a((function*(){if(!globalThis.WM){var a=!1;if(globalThis.getPlayerAssetsManager)try{yield globalThis.getPlayerAssetsManager(),yield globalThis.playerAssetsManager.getAsset(globalThis.playerAssetsManager.config.WM)}catch(e){console.error("[bs-player::__attachPlayerToContainer] error on getPlayerAssetsManager",e),a=!0}else a=!0;if(globalThis.globalWebdeps&&a)try{yield globalThis.globalWebdeps("player")}catch(e){console.error('[bs-player::__attachPlayerToContainer] error on globalWebdeps("player")',e)}}try{yield globalThis.WM.playerAvailable;var r=t.getOptionsByAttributes();t.playerConfigs=yield i({videoID:t.videoid,assetsProfileId:t.assetsProfileId,autoPlay:t.autoplay,bsplayer:t,customPlayerOptions:r}),t.WMPlayer=new globalThis.WM.Player(t.playerConfigs),t.asyncIsDone||function(t,a,r){void 0===a&&(a={}),void 0===r&&(r=()=>{});var o=s();o.getAsyncData&&o.getAsyncData().then((s=>{r(),t.configure(e({},a,{adCustomData:s.adCustomData}))}))}(t.WMPlayer,t.playerConfigs,(()=>{t.asyncIsDone=!0})),t.WMPlayer.attachTo(t),t.isReady=!0,t.onReady&&t.onReady()}catch(e){console.error(e)}}))()}version(){return this.version}get videoid(){return this.getAttribute("videoid")}set videoid(e){this.setAttribute("videoid",e)}get assetsProfileId(){return this.getAttribute("data-assets-profile")}set assetsProfileId(e){this.setAttribute("data-assets-profile",e)}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(e){e?this.setAttribute("autoplay",""):this.removeAttribute("autoplay")}get lazy(){return this.hasAttribute("lazy")}set lazy(e){e?this.setAttribute("lazy",""):this.removeAttribute("lazy")}seek(e){this.WMPlayer.seek(e)}}customElements.define("bs-player",n)})();